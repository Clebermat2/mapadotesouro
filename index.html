<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa do Tesouro da UEx</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Creepster&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdf2e0; /* Um tom de pergaminho mais claro */
        }
        .treasure-font {
            font-family: 'Creepster', cursive;
        }
        .map-container {
            background-image: url('https://www.transparenttextures.com/patterns/old-paper.png');
            background-color: #faebd7; /* Cor de pergaminho */
            border: 4px solid #78350f; /* Marrom escuro */
            position: relative;
            height: 500px; /* Altura fixa para o mapa */
        }
        .map-point {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.25rem;
            transition: all 0.5s ease-in-out;
            border: 3px solid transparent;
        }
        .map-point.locked {
            background-color: #a1a1aa; /* zinc-400 */
            color: #e4e4e7; /* zinc-200 */
            border-color: #71717a; /* zinc-500 */
        }
        .map-point.active {
            background-color: #f59e0b; /* amber-500 */
            color: white;
            border-color: #b45309; /* amber-700 */
            transform: scale(1.25);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.8);
            z-index: 10;
        }
        .map-point.completed {
            background-color: #16a34a; /* green-600 */
            color: white;
            border-color: #14532d; /* green-900 */
        }
        .map-path {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            transition: stroke-dashoffset 1.5s ease-in-out;
            stroke: #78350f; /* amber-900 */
            stroke-width: 5px;
            fill: none;
            stroke-linecap: round;
        }
        .map-path.revealed {
            stroke-dashoffset: 0;
        }
        #pirate-marker {
            position: absolute;
            font-size: 2.5rem;
            transition: all 1.5s ease-in-out;
            z-index: 20;
            transform: translate(-50%, -50%);
        }
        .treasure-chest {
            position: absolute;
            font-size: 3rem;
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.5s ease-in-out 1s;
        }
        .treasure-chest.visible {
            transform: translate(-50%, -50%) scale(1);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-4xl bg-amber-100 rounded-2xl shadow-2xl p-6 md:p-8">

        <div id="game-container">
            <header class="text-center mb-6">
                <h1 class="text-4xl md:text-5xl font-bold text-amber-900 treasure-font tracking-wider">Mapa do Tesouro da UEx</h1>
                <p class="text-amber-700 mt-2 text-lg">Siga o caminho, decifre os enigmas e encontre o tesouro!</p>
            </header>

            <div class="flex flex-col lg:flex-row gap-6 items-center">
                <!-- Mapa Visual -->
                <div class="w-full lg:w-2/3 map-container rounded-lg shadow-inner">
                    <svg class="absolute top-0 left-0 w-full h-full" viewbox="0 0 100 100" preserveAspectRatio="none">
                        <path id="path-1" class="map-path" d="M 15 20 Q 25 40 45 45" />
                        <path id="path-2" class="map-path" d="M 45 45 Q 60 40 75 30" />
                        <path id="path-3" class="map-path" d="M 75 30 Q 80 55 80 80" />
                    </svg>
                    <div id="point-0" class="map-point" style="top: 20%; left: 15%; transform: translate(-50%, -50%);">1</div>
                    <div id="point-1" class="map-point" style="top: 45%; left: 45%; transform: translate(-50%, -50%);">2</div>
                    <div id="point-2" class="map-point" style="top: 30%; left: 75%; transform: translate(-50%, -50%);">3</div>
                    <div id="point-3" class="map-point" style="top: 80%; left: 80%; transform: translate(-50%, -50%);">4</div>
                    <div id="treasure-chest" class="treasure-chest" style="top: 80%; left: 80%;">üèÜ</div>
                    <div id="pirate-marker">üè¥‚Äç‚ò†Ô∏è</div>
                </div>

                <!-- √Årea da Pergunta -->
                <div class="w-full lg:w-1/3 bg-amber-50/50 p-6 rounded-lg border-2 border-dashed border-amber-600">
                    <div id="step-container">
                        <h2 id="step-title" class="text-xl font-bold text-amber-900 mb-2"></h2>
                        <p id="step-clue" class="text-amber-800 mb-4 h-20"></p>
                    </div>
                    <div class="flex flex-col gap-3">
                        <input type="text" id="answer-input" placeholder="Sua resposta..." class="w-full px-4 py-3 text-lg text-amber-900 bg-white border-2 border-amber-700 rounded-lg focus:ring-4 focus:ring-amber-400 focus:border-amber-700 focus:outline-none transition duration-300">
                        <button id="submit-button" class="w-full bg-amber-700 text-white font-bold text-lg px-8 py-3 rounded-lg hover:bg-amber-800 focus:outline-none focus:ring-4 focus:ring-amber-400 transition duration-300 transform hover:scale-105">
                            Verificar
                        </button>
                    </div>
                    <p id="feedback-message" class="mt-3 text-center h-6 font-semibold"></p>
                </div>
            </div>
        </div>

        <!-- Tela Final -->
        <div id="treasure-container" class="hidden text-center p-8">
             <h1 class="text-4xl md:text-5xl font-bold text-amber-900 treasure-font tracking-wider">Tesouro Encontrado!</h1>
            <div class="text-7xl my-6 animate-bounce">üèÜ</div>
            <p class="text-xl text-amber-800 bg-amber-100/70 p-6 rounded-lg border-2 border-amber-600">
                Parab√©ns! Voc√™ decifrou todos os enigmas e concluiu a jornada! Sua UEx est√° com o caminho livre para ser habilitada. Com organiza√ß√£o e seguindo esses passos, voc√™ garantir√° o sucesso na gest√£o dos recursos para a sua escola. Continue o √≥timo trabalho!
            </p>
        </div>
    </div>

    <script>
        // --- Configura√ß√£o do Jogo ---
        const treasureMap = [
            { step: "Passo 1: Formaliza√ß√£o", clue: "√â o documento principal que rege a associa√ß√£o, como uma constitui√ß√£o.", answer: "ESTATUTO", pos: { top: '20%', left: '15%' } },
            { step: "Passo 2: Elei√ß√£o", clue: "√â o nome da reuni√£o formal onde os membros da diretoria s√£o escolhidos.", answer: "ASSEMBLEIA", pos: { top: '45%', left: '45%' } },
            { step: "Passo 3: Conta Banc√°ria", clue: "√â o n√∫mero de identifica√ß√£o na Receita Federal, necess√°rio para abrir a conta.", answer: "CNPJ", pos: { top: '30%', left: '75%' } },
            { step: "Passo 4: Cadastro", clue: "√â o sistema web do FNDE para gerenciar o Dinheiro Direto na Escola.", answer: "PDDEWEB", pos: { top: '80%', left: '80%' } }
        ];
        let currentStep = 0;

        // --- Elementos do DOM ---
        const elements = {
            stepTitle: document.getElementById('step-title'),
            stepClue: document.getElementById('step-clue'),
            answerInput: document.getElementById('answer-input'),
            submitButton: document.getElementById('submit-button'),
            feedbackMessage: document.getElementById('feedback-message'),
            gameContainer: document.getElementById('game-container'),
            treasureContainer: document.getElementById('treasure-container'),
            pirateMarker: document.getElementById('pirate-marker'),
            treasureChest: document.getElementById('treasure-chest'),
            points: treasureMap.map((_, i) => document.getElementById(`point-${i}`)),
            paths: treasureMap.map((_, i) => document.getElementById(`path-${i+1}`)).filter(p => p)
        };

        // --- Fun√ß√µes do Jogo ---
        function updateMap() {
            // Atualiza os pontos (marcadores X)
            elements.points.forEach((point, index) => {
                point.classList.remove('active', 'completed', 'locked');
                if (index < currentStep) {
                    point.classList.add('completed');
                } else if (index === currentStep) {
                    point.classList.add('active');
                } else {
                    point.classList.add('locked');
                }
            });
            // Move o pirata
            const targetPos = treasureMap[currentStep].pos;
            elements.pirateMarker.style.top = targetPos.top;
            elements.pirateMarker.style.left = targetPos.left;
            // Revela os caminhos
            elements.paths.forEach((path, index) => {
                if (index < currentStep) {
                    path.classList.add('revealed');
                }
            });
        }

        function loadStep() {
            if (currentStep < treasureMap.length) {
                const stepData = treasureMap[currentStep];
                elements.stepTitle.textContent = stepData.step;
                elements.stepClue.textContent = `Dica: ${stepData.clue}`;
                elements.answerInput.value = '';
                elements.feedbackMessage.textContent = '';
                elements.answerInput.focus();
                updateMap();
            } else {
                showTreasure();
            }
        }

        function normalizeString(text) {
            return text.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toUpperCase().trim();
        }

        function checkAnswer() {
            const userAnswer = normalizeString(elements.answerInput.value);
            const correctAnswer = normalizeString(treasureMap[currentStep].answer);

            if (userAnswer === correctAnswer) {
                elements.feedbackMessage.textContent = 'Correto! Avan√ßando no mapa...';
                elements.feedbackMessage.classList.remove('text-red-600');
                elements.feedbackMessage.classList.add('text-green-600');
                elements.answerInput.disabled = true;
                elements.submitButton.disabled = true;
                
                currentStep++;
                
                setTimeout(() => {
                    loadStep();
                    elements.answerInput.disabled = false;
                    elements.submitButton.disabled = false;
                }, 1800);
            } else {
                elements.feedbackMessage.textContent = 'Incorreto. Tente novamente!';
                elements.feedbackMessage.classList.add('text-red-600');
                elements.feedbackMessage.classList.remove('text-green-600');
            }
        }

        function showTreasure() {
            elements.pirateMarker.style.opacity = 0;
            elements.treasureChest.classList.add('visible');
            setTimeout(() => {
                elements.gameContainer.classList.add('hidden');
                elements.treasureContainer.classList.remove('hidden');
            }, 1000);
        }

        // --- Event Listeners ---
        elements.submitButton.addEventListener('click', checkAnswer);
        elements.answerInput.addEventListener('keyup', (event) => {
            if (event.key === 'Enter') checkAnswer();
        });

        // --- Inicia o Jogo ---
        window.onload = loadStep;
    </script>
</body>
</html>
